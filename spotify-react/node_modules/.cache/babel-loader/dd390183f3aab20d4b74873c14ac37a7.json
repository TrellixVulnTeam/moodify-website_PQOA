{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Shaylan Rao\\\\Documents\\\\UG3\\\\Final Year Project\\\\Website\\\\spotify-react\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport './App.css';\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport Login from './components/spotifyLogin';\nimport SearchBar from './components/searchBar';\nimport ArtistCards from './components/ArtistCards';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [token, setToken] = useState(\"\");\n  const [searchKey, setSearchKey] = useState(\"\");\n  const [tracks, setTracks] = useState([]); // const getToken = () => {\n  //     let urlParams = new URLSearchParams(window.location.hash.replace(\"#\",\"?\"));\n  //     let token = urlParams.get('access_token');\n  // }\n\n  const [testData, setTestData] = useState({});\n  useEffect(() => {\n    fetch(\"/time\").then(res => res.json()).then(testData => {\n      setTestData(testData);\n      console.log(testData);\n    });\n  }, []);\n  useEffect(() => {\n    const hash = window.location.hash;\n    let token = window.localStorage.getItem(\"token\"); // getToken()\n\n    if (!token && hash) {\n      token = hash.substring(1).split(\"&\").find(elem => elem.startsWith(\"access_token\")).split(\"=\")[1];\n      window.location.hash = \"\";\n      window.localStorage.setItem(\"token\", token);\n    }\n\n    setToken(token);\n  }, []);\n\n  const logout = () => {\n    setToken(\"\");\n    window.localStorage.removeItem(\"token\");\n  };\n\n  const searchRecentTracks = async e => {\n    e.preventDefault();\n    const {\n      data\n    } = await axios.get(\"https://api.spotify.com/v1/me/player/recently-played\", {\n      headers: {\n        Authorization: `Bearer ${token}`\n      } // If search request, then use below, atm just a get recently played\n      // params: {\n      //     q: searchKey,\n      //     type: \"artist\"\n      //}\n\n    }); // console.log(data.items[0].track.album.images[0].url)\n\n    console.log(data.items[0].track.track.artists[0].url);\n    setTracks(data.items);\n  };\n\n  const renderRecentAlbums = () => {\n    return tracks.map(track => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [track.track.id ? /*#__PURE__*/_jsxDEV(\"img\", {\n        width: \"50%\",\n        src: track.track.album.images[0].url,\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 35\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"No Image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 104\n      }, this), track.name]\n    }, track.track.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this));\n  };\n\n  const renderRecentArtists = () => {\n    return tracks.map(track => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [track.track.id ? /*#__PURE__*/_jsxDEV(\"img\", {\n        width: \"50%\",\n        src: track.track.artists[0].url,\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 35\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"No Image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 99\n      }, this), track.name]\n    }, track.track.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App relative\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        class: \"fixed top-0 left-0 right-0\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          class: \"font-medium leading-tight text-5xl mt-0 mb-2 text-blue-600\",\n          children: \"Spotify React\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ArtistCards, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(SearchBar, {\n        token: token,\n        searchRecentTracks: searchRecentTracks,\n        setSearchKey: setSearchKey\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Login, {\n        token: token,\n        logout: logout\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this), renderRecentArtists()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 9\n  }, this);\n}\n\n_s(App, \"rID7YPJf9nuIgjhm7baVDWE4iAo=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Users/Shaylan Rao/Documents/UG3/Final Year Project/Website/spotify-react/src/App.js"],"names":["useEffect","useState","axios","Login","SearchBar","ArtistCards","App","token","setToken","searchKey","setSearchKey","tracks","setTracks","testData","setTestData","fetch","then","res","json","console","log","hash","window","location","localStorage","getItem","substring","split","find","elem","startsWith","setItem","logout","removeItem","searchRecentTracks","e","preventDefault","data","get","headers","Authorization","items","track","artists","url","renderRecentAlbums","map","id","album","images","name","renderRecentArtists"],"mappings":"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","sourcesContent":["import './App.css';\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport Login from './components/spotifyLogin'\nimport SearchBar from './components/searchBar';\nimport ArtistCards from './components/ArtistCards';\n\n\nfunction App() {\n    const [token, setToken] = useState(\"\")\n    const [searchKey, setSearchKey] = useState(\"\")\n    const [tracks, setTracks] = useState([])\n\n    // const getToken = () => {\n    //     let urlParams = new URLSearchParams(window.location.hash.replace(\"#\",\"?\"));\n    //     let token = urlParams.get('access_token');\n    // }\n\n    const [testData, setTestData] = useState({})\n\n    useEffect(() => {\n        fetch(\"/time\").then(\n            res => res.json()\n        ).then(\n            testData => {\n                setTestData(testData)\n                console.log(testData)\n            }\n        )\n    }, []);\n\n    useEffect(() => {\n        const hash = window.location.hash\n        let token = window.localStorage.getItem(\"token\")\n\n        // getToken()\n\n        if (!token && hash) {\n            token = hash.substring(1).split(\"&\").find(elem => elem.startsWith(\"access_token\")).split(\"=\")[1]\n\n            window.location.hash = \"\"\n            window.localStorage.setItem(\"token\", token)\n        }\n\n        setToken(token)\n\n    }, [])\n\n    const logout = () => {\n        setToken(\"\")\n        window.localStorage.removeItem(\"token\")\n    }\n\n    const searchRecentTracks = async (e) => {\n        e.preventDefault()\n        const { data } = await axios.get(\"https://api.spotify.com/v1/me/player/recently-played\", {\n            headers: {\n                Authorization: `Bearer ${token}`\n            },\n            // If search request, then use below, atm just a get recently played\n            // params: {\n            //     q: searchKey,\n            //     type: \"artist\"\n            //}\n        })\n        // console.log(data.items[0].track.album.images[0].url)\n        console.log(data.items[0].track.track.artists[0].url)\n        setTracks(data.items)\n    }\n\n    const renderRecentAlbums = () => {\n        return tracks.map(track => (\n            <div key={track.track.id}>\n                {track.track.id ? <img width={\"50%\"} src={track.track.album.images[0].url} alt=\"\" /> : <div>No Image</div>}\n                {track.name}\n            </div>\n        ))\n    }\n\n    const renderRecentArtists = () => {\n        return tracks.map(track => (\n            <div key={track.track.id}>\n                {track.track.id ? <img width={\"50%\"} src={track.track.artists[0].url} alt=\"\" /> : <div>No Image</div>}\n                {track.name}\n            </div>\n        ))\n    }\n\n    return (\n        <div className=\"App relative\">\n            <div className=\"App-header\">\n                <header class = \"fixed top-0 left-0 right-0\">            \n                    <h1 class=\"font-medium leading-tight text-5xl mt-0 mb-2 text-blue-600\">Spotify React</h1>\n                </header>\n\n                <ArtistCards />\n\n                <SearchBar token={token} searchRecentTracks={searchRecentTracks} setSearchKey={setSearchKey} />\n\n                {/* Login and logout function */}\n                <Login token={token} logout={logout} />\n\n                {renderRecentArtists()}\n\n            </div>\n        </div>\n\n    );\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}